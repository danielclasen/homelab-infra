---
apiVersion: mongodb.com/v1
kind: MongoDBOpsManager
metadata:
  name: ops-manager
  namespace: mongodb
spec:
  replicas: 1
  version: 8.0.7
  adminCredentials: ops-manager-credentials-secret
  applicationDatabase:
    members: 3
    version: 8.0.7
    podSpec:
      persistence:
        single:
          storage: 10Gi
          storageClass: ssd-perf-xfs-r1
  externalConnectivity:
    type: ClusterIP
    port: 8080
  statefulSet:
    spec:
      template:
        spec:
          nodeSelector:
            beta.kubernetes.io/arch: amd64
      volumeClaimTemplates:
        - metadata:
            name: data
          spec:
            accessModes:
              - ReadWriteOnce
            resources:
              requests:
                storage: 16Gi
            volumeMode: Filesystem
            storageClassName: ssd-perf-r3
